(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4128:(e,t,n)=>{Promise.resolve().then(n.bind(n,5209))},5209:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>en});var a=n(5155),r=n(698),o=n(2611),s=n(177),i=n(7425),l=n(5923);function c(){let e=(0,r._)(["\n  margin-left: ",";\n  width: ",";\n  background-color: #f7fafc;\n  padding: 16px;\n  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n  position: fixed;\n  top: 0;\n  z-index: 1000;\n  transition: margin-left 0.3s ease-in-out, width 0.3s ease-in-out;\n"]);return c=function(){return e},e}function d(){let e=(0,r._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return d=function(){return e},e}function u(){let e=(0,r._)(["\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #2d3748;\n"]);return u=function(){return e},e}let p=(0,o.Ay)(s.a)(c(),e=>{let{isOpen:t}=e;return t?"250px":"70px"},e=>{let{isOpen:t}=e;return t?"calc(100% - 250px)":"calc(100% - 70px)"}),g=(0,o.Ay)(i.s)(d()),x=(0,o.Ay)(l.E)(u());function h(e){let{isOpen:t}=e;return(0,a.jsx)(p,{isOpen:t,children:(0,a.jsx)(g,{children:(0,a.jsx)(x,{children:"Painel Financeiro"})})})}var f=n(2115),m=n(6046),b=n(4495);function j(e){let{children:t}=e,{isUserAuthenticated:n}=function(){let[e,t]=(0,f.useState)(!1),n=(0,m.useRouter)();return(0,f.useEffect)(()=>{(0,b.wR)()?t(!0):n.push("/")},[n]),{isUserAuthenticated:e,handleLogout:()=>{(0,b.KX)(),n.push("/")}}}();return n?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{children:"Carregando..."})}var y=n(7865),w=n(2888),v=n(3892),S=n(4416),_=n(63);function C(){let e=(0,r._)(["\n  background-color: #1a202c;\n  color: white;\n  width: ",";\n  height: 100vh;\n  padding: ",";\n  position: fixed;\n  left: 0;\n  top: 0;\n  transition: width 0.3s ease-in-out;\n  display: flex;\n  flex-direction: column;\n"]);return C=function(){return e},e}function D(){let e=(0,r._)(["\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  width: 100%;\n  text-align: left;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: end;\n  justify-content: end;\n  padding: 10px;\n  transition: background 0.3s;\n\n  &:hover {\n    background: #ffffff19;\n  }\n"]);return D=function(){return e},e}function k(){let e=(0,r._)(["\n  flex-grow: 1;\n  margin-top: 20px;\n"]);return k=function(){return e},e}function I(){let e=(0,r._)(["\n  display: flex;\n  background-color: ",";\n  align-items: center;\n  justify-content: center;\n  gap: ",";\n  text-decoration: none;\n  padding: 10px;\n  border-radius: 5px;\n  transition: background 0.3s ease-in-out;\n  color: ",";\n\n  &:hover {\n    background: #ffffff19;\n  }\n"]);return I=function(){return e},e}function E(){let e=(0,r._)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  background-color: #e53e3e;\n  color: white;\n  cursor: pointer;\n  padding: 10px;\n  width: 100%;\n  border-radius: 5px;\n  margin-top: 20px;\n  transition: background 0.3s ease-in-out;\n\n  &:hover {\n    background-color: #c53030;\n  }\n"]);return E=function(){return e},e}let A=(0,o.Ay)(s.a)(C(),e=>{let{isOpen:t}=e;return t?"250px":"70px"},e=>{let{isOpen:t}=e;return t?"20px":"10px"}),T=(0,o.Ay)(v.$)(D()),R=(0,o.Ay)(S.B)(k()),z=(0,o.Ay)(_.N)(I(),e=>{let{isActive:t}=e;return t?"#fff":null},e=>{let{isOpen:t}=e;return t?"0":"10px"},e=>{let{isActive:t}=e;return t?"#000":"#fff"}),P=(0,o.Ay)(v.$)(E());function F(e){let{isOpen:t,setIsOpen:n}=e,r=(0,m.usePathname)(),o=async()=>{try{await (0,b.KX)(),window.location.href="/"}catch(e){console.error("Erro ao fazer logout:",e)}};return(0,a.jsxs)(A,{isOpen:t,children:[(0,a.jsxs)(T,{onClick:()=>{n(!t)},display:"flex",alignItems:"center",justifyContent:"center",gap:4,children:[t&&(0,a.jsx)(l.E,{fontWeight:"bold",children:"Bix Tecnologia"}),(0,a.jsx)(y.I,{as:t?w.yGN:w.ND1,boxSize:6})]}),(0,a.jsx)(R,{children:(0,a.jsxs)(z,{href:"/dashboard",isActive:"/dashboard"===r,children:[(0,a.jsx)(y.I,{as:w.V5Y}),t&&"Home"]})}),(0,a.jsxs)(P,{onClick:o,children:[t&&(0,a.jsx)("span",{children:"Logout"}),(0,a.jsx)(y.I,{as:w.QeK,boxSize:6})]})]})}var N=n(6105),$=n(1030);let L=(0,f.cache)(async()=>{try{let e=await fetch("/transactions.json",{next:{revalidate:86400}});if(!e.ok)throw Error("Erro ao carregar transa\xe7\xf5es");return(await e.json()).map(e=>({...e,date:new Intl.DateTimeFormat("pt-BR").format(new Date(Number(e.date))),amount:parseFloat(e.amount)/100}))}catch(e){return console.error("Erro ao carregar transa\xe7\xf5es:",e),[]}});var M=n(4565),O=n(809);function W(e){let{filters:t,setFilters:n}=e,[r,o]=(0,f.useState)(t),[s,l]=(0,f.useState)(!1);(0,f.useEffect)(()=>{l(!0);{let e={date:localStorage.getItem("filter_date")||"",account:localStorage.getItem("filter_account")||"",industry:localStorage.getItem("filter_industry")||"",state:localStorage.getItem("filter_state")||"",transactionType:localStorage.getItem("filter_transactionType")||"",startDate:localStorage.getItem("filter_startDate")||"",endDate:localStorage.getItem("filter_endDate")||""};n(e),o(e)}},[]);let c=(e,t)=>{o(n=>({...n,[e]:t}))};return s?(0,a.jsxs)(S.B,{mb:6,children:[(0,a.jsxs)(i.s,{direction:{base:"column",md:"row"},gap:4,children:[(0,a.jsx)(M.p,{type:"date",placeholder:"Data Inicial",value:r.startDate,onChange:e=>c("startDate",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px"}),(0,a.jsx)(M.p,{type:"date",placeholder:"Data Final",value:r.endDate,onChange:e=>c("endDate",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px"}),(0,a.jsx)(M.p,{placeholder:"Ind\xfastria",value:r.industry,onChange:e=>c("industry",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px"})]}),(0,a.jsxs)(i.s,{direction:{base:"column",md:"row"},gap:4,children:[(0,a.jsx)(M.p,{placeholder:"Conta",value:r.account,onChange:e=>c("account",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px"}),(0,a.jsxs)(O.l,{placeholder:"Estado",value:r.state,onChange:e=>c("state",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px",sx:{"select::-ms-expand":{display:"none"},appearance:"none"},children:[(0,a.jsx)("option",{value:"TX",children:"Texas (TX)"}),(0,a.jsx)("option",{value:"MN",children:"Minnesota (MN)"})]}),(0,a.jsxs)(O.l,{placeholder:"Tipo de Transa\xe7\xe3o",value:r.transactionType,onChange:e=>c("transactionType",e.target.value),height:"48px",border:"1px solid #dcdcdc",borderRadius:"8px",sx:{"& .chakra-select__wrapper":{position:"unset"},appearance:"none",WebkitAppearance:"none",MozAppearance:"none",background:"none",paddingRight:"10px","::ms-expand":{display:"none"},"::-webkit-inner-spin-button, ::-webkit-calendar-picker-indicator":{display:"none"},position:"relative"},children:[(0,a.jsx)("option",{value:"deposit",children:"Receita (Dep\xf3sito)"}),(0,a.jsx)("option",{value:"withdraw",children:"Despesa (Retirada)"})]}),(0,a.jsx)(v.$,{height:"48px",px:6,borderRadius:"8px",fontWeight:"bold",onClick:()=>{localStorage.setItem("filter_startDate",r.startDate),localStorage.setItem("filter_endDate",r.endDate),localStorage.setItem("filter_date",r.date),localStorage.setItem("filter_account",r.account),localStorage.setItem("filter_industry",r.industry),localStorage.setItem("filter_state",r.state),localStorage.setItem("filter_transactionType",r.transactionType),n(r)},children:"Aplicar Filtros"}),(0,a.jsx)(v.$,{height:"48px",px:6,borderRadius:"8px",fontWeight:"bold",onClick:()=>{localStorage.removeItem("filter_startDate"),localStorage.removeItem("filter_endDate"),localStorage.removeItem("filter_date"),localStorage.removeItem("filter_account"),localStorage.removeItem("filter_industry"),localStorage.removeItem("filter_state"),localStorage.removeItem("filter_transactionType");let e={date:"",account:"",industry:"",state:"",transactionType:"",startDate:"",endDate:""};n(e),o(e)},children:"Limpar Filtros"})]}),(0,a.jsx)(i.s,{direction:{base:"column",md:"row"},gap:4,justifyContent:"flex-end",mb:10})]}):null}function B(e){let{title:t,value:n,color:r}=e;return(0,a.jsxs)(s.a,{p:4,bg:r,borderRadius:"md",boxShadow:"md",color:"white",textAlign:"center",children:[(0,a.jsx)(l.E,{fontSize:"lg",fontWeight:"bold",children:t}),(0,a.jsx)(l.E,{fontSize:"2xl",children:n})]})}function X(e){let{saldoTotal:t,totalReceitas:n,totalDespesas:r,transacoesPendentes:o}=e;return(0,a.jsxs)($.r,{columns:{base:1,md:4},mb:6,gap:"20px",children:[(0,a.jsx)(B,{title:"Saldo Total",value:"R$ ".concat(t.toFixed(2)),color:t<0?"red.600":"green.400"}),(0,a.jsx)(B,{title:"Receitas",value:"R$ ".concat(n.toFixed(2)),color:"blue.400"}),(0,a.jsx)(B,{title:"Despesas",value:"R$ ".concat(r.toFixed(2)),color:"red.400"}),(0,a.jsx)(B,{title:"Transa\xe7\xf5es Pendentes",value:o,color:"yellow.400"})]})}var K=n(5781),H=n(1710);function q(e){let{barChartData:t}=e;return(0,a.jsxs)(s.a,{p:4,bg:"gray.100",borderRadius:"md",boxShadow:"md",children:[(0,a.jsx)(l.E,{fontSize:"lg",fontWeight:"bold",mb:2,children:"Receitas vs. Despesas"}),(0,a.jsx)(H.yP,{data:t})]})}function V(e){let{lineChartData:t}=e;return(0,a.jsxs)(s.a,{p:4,bg:"gray.100",borderRadius:"md",boxShadow:"md",children:[(0,a.jsx)(l.E,{fontSize:"lg",fontWeight:"bold",mb:2,children:"Evolu\xe7\xe3o do Saldo"}),(0,a.jsx)(H.N1,{data:t})]})}K.t1.register(...K.$L,K.PP);var Q=n(7634),G=n(4150),J=n(8359);function U(e){let{count:t,pageSize:n,page:r,onPageChange:o}=e,s=Math.ceil(t/n);return(0,a.jsxs)(J.z,{wrap:"wrap",justify:"center",mt:4,children:[(0,a.jsx)(Y,{onClick:()=>o(Math.max(1,r-1)),disabled:1===r}),(0,a.jsxs)(l.E,{children:["P\xe1gina ",r," de ",s]}),(0,a.jsx)(Z,{onClick:()=>o(Math.min(s,r+1)),disabled:r===s})]})}function Y(e){let{onClick:t,disabled:n}=e;return(0,a.jsx)(v.$,{onClick:t,disabled:n,children:"Anterior"})}function Z(e){let{onClick:t,disabled:n}=e;return(0,a.jsx)(v.$,{onClick:t,disabled:n,children:"Pr\xf3ximo"})}function ee(e){let{transactions:t}=e,[n,r]=(0,f.useState)(1),o=t.slice((n-1)*5,5*n);return(0,a.jsxs)(S.B,{width:"full",gap:"5",children:[(0,a.jsx)(Q.D,{size:"xl",children:"Transa\xe7\xf5es"}),(0,a.jsx)(G.Rz,{children:(0,a.jsxs)(G.jq,{size:"sm",variant:"outline",overflowX:"auto",striped:!0,children:[(0,a.jsx)(G.A0,{children:(0,a.jsxs)(G.Hj,{children:[(0,a.jsx)(G.ug,{children:"Data"}),(0,a.jsx)(G.ug,{children:"Conta"}),(0,a.jsx)(G.ug,{children:"Ind\xfastria"}),(0,a.jsx)(G.ug,{children:"Estado"}),(0,a.jsx)(G.ug,{children:"Tipo"}),(0,a.jsx)(G.ug,{textAlign:"end",children:"Valor"})]})}),(0,a.jsx)(G.BF,{children:o.map((e,t)=>(0,a.jsxs)(G.Hj,{children:[(0,a.jsx)(G.nA,{children:e.date}),(0,a.jsx)(G.nA,{children:e.account}),(0,a.jsx)(G.nA,{children:e.industry}),(0,a.jsx)(G.nA,{children:e.state}),(0,a.jsx)(G.nA,{children:"deposit"===e.transaction_type?"Receita":"Despesa"}),(0,a.jsxs)(G.nA,{textAlign:"end",fontWeight:"bold",color:"deposit"===e.transaction_type?"green.500":"red.500",children:["R$ ",Number(e.amount).toFixed(2)]})]},"".concat(e.date,"-").concat(t)))})]})}),(0,a.jsx)(U,{count:t.length,pageSize:5,page:n,onPageChange:r})]})}function et(e){let{isOpen:t}=e,[n,r]=(0,f.useState)(!0),[o,i]=(0,f.useState)([]),[c,d]=(0,f.useState)({date:"",account:"",industry:"",state:"",transactionType:"",startDate:"",endDate:""}),u=(0,f.useMemo)(()=>o.filter(e=>{let[t,n,a]=e.date.split("/"),r=new Date("".concat(a,"-").concat(n,"-").concat(t)),o=c.startDate?new Date(c.startDate):null,s=c.endDate?new Date(c.endDate):null;return(!o||r>=o)&&(!s||r<=s)&&(!c.account||e.account.toLowerCase().includes(c.account.toLowerCase()))&&(!c.industry||e.industry.toLowerCase().includes(c.industry.toLowerCase()))&&(!c.state||e.state.toLowerCase()===c.state.toLowerCase())&&(!c.transactionType||e.transaction_type===c.transactionType)}),[c,o]),p=(0,f.useMemo)(()=>{let e=u.filter(e=>"deposit"===e.transaction_type).reduce((e,t)=>e+t.amount,0),t=u.filter(e=>"withdraw"===e.transaction_type).reduce((e,t)=>e+t.amount,0);return{saldoTotal:e-t,totalReceitas:e,totalDespesas:t,transacoesPendentes:u.length}},[u]),g=(0,f.useMemo)(()=>{let e=u.reduce((e,t)=>{let n=new Date(t.date).toLocaleDateString("pt-BR",{timeZone:"UTC"});return e[n]||(e[n]={deposits:0,withdraws:0}),"deposit"===t.transaction_type?e[n].deposits+=t.amount:e[n].withdraws+=t.amount,e},{}),t=Object.keys(e),n=t.map(t=>e[t].deposits),a=t.map(t=>e[t].withdraws);return{dates:t,deposits:n,withdraws:a}},[u]);(0,f.useEffect)(()=>{d({startDate:localStorage.getItem("filter_startDate")||"",endDate:localStorage.getItem("filter_endDate")||"",date:localStorage.getItem("filter_date")||"",account:localStorage.getItem("filter_account")||"",industry:localStorage.getItem("filter_industry")||"",state:localStorage.getItem("filter_state")||"",transactionType:localStorage.getItem("filter_transactionType")||""})},[]),(0,f.useEffect)(()=>{(async function(){try{r(!0);let e=await L();i(e)}catch(e){console.error("Erro ao carregar transa\xe7\xf5es",e)}finally{r(!1)}})()},[]);let x={labels:g.dates,datasets:[{label:"Receitas",data:g.deposits,backgroundColor:"rgba(54, 162, 235, 0.6)"},{label:"Despesas",data:g.withdraws,backgroundColor:"rgba(255, 99, 132, 0.6)"}]},h={labels:g.dates,datasets:[{label:"Saldo Acumulado",data:g.dates.map((e,t)=>g.deposits.slice(0,t+1).reduce((e,t)=>e+t,0)-g.withdraws.slice(0,t+1).reduce((e,t)=>e+t,0)),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0}]};return(0,a.jsx)(s.a,{ml:t?"250px":"70px",p:10,pt:"100px",transition:"margin-left 0.3s ease-in-out",children:n?(0,a.jsxs)(s.a,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,a.jsx)(N.y,{size:"xl",color:"blue.500",width:"80px",height:"80px"}),(0,a.jsx)(l.E,{mt:4,fontSize:"lg",fontWeight:"bold",children:"Carregando transa\xe7\xf5es..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W,{filters:c,setFilters:d}),(0,a.jsx)(X,{...p}),(0,a.jsxs)($.r,{columns:{base:1,md:2},mb:6,gap:"20px",children:[(0,a.jsx)(q,{barChartData:x}),(0,a.jsx)(V,{lineChartData:h})]}),(0,a.jsx)(ee,{transactions:u})]})})}function en(){let[e,t]=(0,f.useState)(!0);return(0,a.jsxs)(j,{children:[(0,a.jsx)(h,{isOpen:e}),(0,a.jsx)(F,{isOpen:e,setIsOpen:t}),(0,a.jsx)(et,{isOpen:e})]})}},3777:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var a=n(1131);let r="us-east-1",o="us-east-1_S0ums0PPp",s="3k9drbpelqvucj3cj7cbrrp8k6";if(!r||!o||!s)throw Error("As vari\xe1veis de ambiente do Cognito n\xe3o est\xe3o corretamente definidas.");let i={Auth:{Cognito:{region:r,userPoolId:o,userPoolClientId:s}}};function l(){a.E.configure(i)}},4495:(e,t,n)=>{"use strict";n.d(t,{A_:()=>f,Au:()=>b,Bi:()=>p,DQ:()=>h,KX:()=>g,Kn:()=>m,ms:()=>j,wR:()=>x});var a=n(3777),r=n(1550),o=n(7950),s=n(3721),i=n(1667),l=n(1113),c=n(9417),d=n(6036),u=n(3023);async function p(e,t){try{var n,a,i;let l=await (0,r.$)();(null===(n=l.tokens)||void 0===n?void 0:n.idToken)&&await (0,o.C)(),await (0,s.J)({username:e,password:t});let c=await (0,r.$)(),d=(null===(i=c.tokens)||void 0===i?void 0:null===(a=i.idToken)||void 0===a?void 0:a.toString())||null;if(d)return localStorage.setItem("authToken",d),{success:!0,token:d};return{success:!1,message:"Erro ao obter token de autentica\xe7\xe3o"}}catch(e){return console.error("Erro ao fazer login:",e),{success:!1,message:"Credenciais inv\xe1lidas"}}}function g(){localStorage.removeItem("authToken"),(0,o.C)()}function x(){return null!==localStorage.getItem("authToken")}async function h(e,t){try{return await (0,i.H)({username:e,password:t,options:{userAttributes:{email:e}}}),{success:!0,message:"Cadastro realizado! Verifique seu e-mail."}}catch(e){return console.error("Erro ao registrar:",e),{success:"Erro ao cadastrar"}}}async function f(e,t){try{return await (0,l.z)({username:e,confirmationCode:t}),{success:!0,message:"Conta verificada! Agora voc\xea pode fazer login."}}catch(e){return console.error("Erro ao confirmar c\xf3digo:",e),{success:!1,message:"Erro ao verificar c\xf3digo"}}}async function m(e){try{return await (0,c.h)({username:e}),{success:!0,message:"Novo c\xf3digo enviado para seu e-mail."}}catch(e){return console.error("Erro ao reenviar c\xf3digo:",e),{success:!1,message:"Erro ao reenviar c\xf3digo"}}}async function b(e){try{return await (0,d.x)({username:e}),{success:!0,message:"C\xf3digo enviado para seu e-mail."}}catch(e){return console.error("Erro ao solicitar redefini\xe7\xe3o de senha:",e),{success:!1,message:"Erro ao solicitar redefini\xe7\xe3o de senha."}}}async function j(e,t,n){try{return await (0,u.P)({username:e,confirmationCode:t,newPassword:n}),{success:!0,message:"Senha redefinida com sucesso!"}}catch(e){return console.error("Erro ao redefinir senha:",e),{success:!1,message:"C\xf3digo inv\xe1lido ou expirado."}}}(0,a.N)()}},e=>{var t=t=>e(e.s=t);e.O(0,[844,647,818,724,814,197,762,441,517,358],()=>t(4128)),_N_E=e.O()}]);